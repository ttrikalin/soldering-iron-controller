Version 4
SHEET 1 2148 1460
WIRE 112 160 -80 160
WIRE 160 160 112 160
WIRE 288 160 160 160
WIRE 416 160 288 160
WIRE 704 160 480 160
WIRE 1104 160 704 160
WIRE -576 208 -736 208
WIRE -80 224 -80 160
WIRE 112 272 112 160
WIRE -736 288 -736 208
WIRE 704 304 704 160
WIRE -80 368 -80 304
WIRE 656 384 608 384
WIRE 608 432 608 384
WIRE 608 432 544 432
WIRE 848 432 608 432
WIRE 1104 432 1104 160
WIRE -736 512 -736 368
WIRE -80 512 -80 448
WIRE -80 512 -736 512
WIRE 112 512 112 336
WIRE 112 512 -80 512
WIRE 704 512 704 400
WIRE 704 512 112 512
WIRE 704 560 704 512
WIRE 848 576 848 432
WIRE 848 576 752 576
WIRE 112 640 112 512
WIRE 288 880 288 160
WIRE 448 880 288 880
WIRE 704 880 704 656
WIRE 704 880 512 880
WIRE 896 880 704 880
WIRE 1104 880 1104 512
WIRE 1104 880 976 880
FLAG 544 432 PWM
FLAG 112 640 0
FLAG -576 224 PWM
FLAG 160 160 VDC
SYMBOL voltage 1104 416 R0
WINDOW 3 281 96 Invisible 2
SYMATTR Value SINE(0 325 50 0 0 0)
SYMATTR InstName V1
SYMBOL res 992 864 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 20
SYMBOL nmos 656 304 R0
SYMATTR InstName M5
SYMBOL nmos 752 656 R180
WINDOW 0 52 30 Left 2
SYMATTR InstName M2
SYMBOL res -64 464 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL diode 480 144 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D1
SYMBOL diode 512 864 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D2
SYMBOL diode 336 1104 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D3
SYMBOL res -64 320 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R1
SYMATTR Value 100K
SYMBOL cap 96 272 R0
SYMATTR InstName C1
SYMATTR Value 47µ
SYMBOL voltage -736 272 R0
SYMATTR InstName V2
SYMATTR Value PULSE(0 15 0 0 0 0.001 0.002 1000)
TEXT -688 -144 Left 2 !.tran .5
